<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>비교 연산자와 equals() 그리고 hashcode() - yk-dev-blog</title>
<meta name="description" content="”==” 비교 연산자(relational operator)">



<meta property="og:type" content="article">
<meta property="og:locale" content="ko">
<meta property="og:site_name" content="yk-dev-blog">
<meta property="og:title" content="비교 연산자와 equals() 그리고 hashcode()">
<meta property="og:url" content="https://midas123.github.io/2019/02/22/equality.html">


  <meta property="og:description" content="”==” 비교 연산자(relational operator)">







  <meta property="article:published_time" content="2019-02-22T00:00:00+00:00">






<link rel="canonical" href="https://midas123.github.io/2019/02/22/equality.html">













<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="yk-dev-blog Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
#scrollToTop {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 30px;
  z-index: 99;
  font-size: 14px;
  border: none;
  outline: none;
  background-color: black;
  color: white;
  cursor: pointer;
  padding: 15px;
  border-radius: 4px;
}


</style>


<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


  


<button onclick="topFunction()" id="scrollToTop" title="Go to top">맨 위로</button>

<script>
  // When the user scrolls down 20px from the top of the document, show the button
  window.onscroll = function() {scrollFunction()};
  
  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      document.getElementById("scrollToTop").style.display = "block";
    } else {
      document.getElementById("scrollToTop").style.display = "none";
    }
  }
  
  // When the user clicks on the button, scroll to the top of the document
  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }
  </script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138663237-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-138663237-1');
</script>

<!-- flex slider -->
<link rel="stylesheet" href="/assets/slider/flexslider.css" type="text/css">
<script src="https://code.jquery.com/jquery-1.6.2.js"integrity="sha256-pXKSYZ0U64y9kjvenyjPmUrGarxI98l1t2kyj/M73ck="crossorigin="anonymous"></script>
<script src="/assets/slider/jquery.flexslider.js"></script>
<script src="/assets/slider/jquery.flexslider-min.js"></script>

<style>
@font-face {
 font-family: 'flexslider-icon';
 src: url(/assets/slider/fonts/flexslider-icon.eot);
 src: url(/assets/slider/fonts/flexslider-icon.woff) format('woff'),
      url(/assets/slider/fonts/flexslider-icon.ttf) format('truetype');
}

</style>
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider({
      animation: "fade",
      directionNav: true,
      slideshowSpeed: 5000,
      animationSpeed: 600,
      touch: true
    });
  });
</script>

<!-- flex slider end -->

    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
<!-- end custom head snippets -->

  </head>
  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">yk-dev-blog</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/year-archive/" >Archive</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">토글 메뉴</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



  
  <div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">팔로우</button>
    <ul class="author__urls social-icons">
      

      
        
          
            <li><a href="http://midas123.tistory.com/" rel="nofollow noopener noreferrer"><i class="fab fa-blogger" aria-hidden="true"></i> Tistory Blog</a></li>
          
        
          
            <li><a href="https://github.com/midas123" rel="nofollow noopener noreferrer"><i class="fab fa-git-square" aria-hidden="true"></i> Github</a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">토글 메뉴</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">MENU</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/year-archive/" class="">최근 포스트</a></li>
          
            
            

            
            

            <li><a href="/#all-tags" class="">모든 태그</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  
</div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="비교 연산자와 equals() 그리고 hashcode()">
    <meta itemprop="description" content="”==” 비교 연산자(relational operator)">
    <meta itemprop="datePublished" content="February 22, 2019">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">비교 연산자와 equals() 그리고 hashcode()
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu">
  <li><a href="#-비교-연산자relational-operator">”==” 비교 연산자(relational operator)</a></li>
  <li><a href="#equals-메서드">equals() 메서드</a></li>
  <li><a href="#-equals-인터뷰-예상-질문">+ equals() 인터뷰 예상 질문</a>
    <ul>
      <li><a href="#1-equals와-함께-오버라이드-해야하는-메서드가-있는가">1. equals()와 함께 오버라이드 해야하는 메서드가 있는가?</a></li>
      <li><a href="#2--equals-결과가-false인-두-객체가-같은-hashcode를-가질-수-있는가">2.  equals() 결과가 false인 두 객체가 같은 hashcode를 가질 수 있는가?</a></li>
      <li><a href="#3-같은-hashcode를-가지고-있는-2개의-key가-있을때-hashmap의-get-메서드는-어떻게-동작하는가">3. 같은 hashcode를 가지고 있는 2개의 key가 있을때 HashMap의 get() 메서드는 어떻게 동작하는가?</a></li>
      <li><a href="#4equals와-hashcode-메서드는-어디에-작성하는가">4.equals()와 hashcode() 메서드는 어디에 작성하는가?</a></li>
      <li><a href="#5클래스의-id-필드가-있다면-equals-메서드에-포함해야-하는가">5.클래스의 id 필드가 있다면 equals() 메서드에 포함해야 하는가?</a></li>
      <li><a href="#7-equals로-객체와-null과-비교할때-어떤-문제가-발생하는가">7. equals()로 객체와 null과 비교할때 어떤 문제가 발생하는가?</a></li>
      <li><a href="#8-equals-메서드-안에서-객체-타입-확인하기-위해서-사용하는-getclass-instanceof는-어떤-차이가-있는가">8. equals() 메서드 안에서 객체 타입 확인하기 위해서 사용하는 getClass(), instanceof는 어떤 차이가 있는가?</a></li>
      <li><a href="#9-2개의-string을-비교-할때-nullpointerexception를-피하려면">9. 2개의 String을 비교 할때 NullPointerException를 피하려면?</a></li>
      <li><a href="#10-equals와--연산자의-차이점은-무엇인가">10. equals()와 == 연산자의 차이점은 무엇인가?</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </aside>
        
        <h2 id="-비교-연산자relational-operator">”==” 비교 연산자(relational operator)</h2>

<p>두 객체를 비교할때 “==” 비교 연산자를 사용하면 두 객체의 참조(reference)가 같은지 비교하게 된다. 두 객체가 참조하는 객체의 메모리 주소가 같을 경우 true를 반환한다. 오로지 참조 객체만을 비교하기 때문에 두 객체의 값이 같은지 비교하는데 쓰일 수 없다.
반면에 int, char, boolean과 같은 primitive 타입의 값을 비교할때는  “==” 비교 연산자를 사용한다. String 타입은 객체(Object)이므로 equals() 메서드로 값을 비교한다. 참고: <a href="https://www.geeksforgeeks.org/string-initialization-java-string-literal-vs-string-object/">String 리터럴과 String 객체</a></p>

<p><br /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="c1">//primitive 비교</span>
		<span class="kt">int</span> <span class="n">num1</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
		<span class="kt">int</span> <span class="n">num2</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">num1</span> <span class="o">==</span> <span class="n">num2</span><span class="o">);</span> <span class="c1">//true</span>
		
		<span class="kt">long</span> <span class="n">l1</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span>
		<span class="kt">long</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">;</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">l1</span> <span class="o">==</span> <span class="n">l2</span><span class="o">);</span> <span class="c1">//false</span>
		
		<span class="c1">//String 비교</span>
		<span class="n">String</span> <span class="n">abc</span> <span class="o">=</span><span class="s">"abc"</span><span class="o">;</span>
		<span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="s">"abc"</span><span class="o">);</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">abc</span> <span class="o">==</span> <span class="n">str</span><span class="o">);</span> <span class="c1">//false</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">abc</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">str</span><span class="o">));</span> <span class="c1">//true</span>
</code></pre></div></div>

<p><br /><br /></p>

<h2 id="equals-메서드">equals() 메서드</h2>

<p>Object 클래스에 equals() 메서드는 기본적으로 두 객체의 참조(객체의 메모리 주소)가 일치하는 확인한다. 위에 “==” 비교 연산자와 차이가 없다. 두 객체가 가지고 있는 값을 비교하기 위해서는 클래스 객체에서 equals() 메서드를 오버라이드해야 한다. String 클래스는 equals() 메서드를 오버라이드해서 String 객체의 값을 비교 하도록 구현되어 있다. (Wrapper 클래스와 File, Date 클래스도 오버라이딩 되어있음)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">anObject</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">anObject</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">anObject</span> <span class="k">instanceof</span> <span class="n">String</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">anotherString</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span><span class="n">anObject</span><span class="o">;</span>
            <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">==</span> <span class="n">anotherString</span><span class="o">.</span><span class="na">value</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">char</span> <span class="n">v1</span><span class="o">[]</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
                <span class="kt">char</span> <span class="n">v2</span><span class="o">[]</span> <span class="o">=</span> <span class="n">anotherString</span><span class="o">.</span><span class="na">value</span><span class="o">;</span>
                <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                <span class="k">while</span> <span class="o">(</span><span class="n">n</span><span class="o">--</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">v1</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">!=</span> <span class="n">v2</span><span class="o">[</span><span class="n">i</span><span class="o">])</span>
                        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                    <span class="n">i</span><span class="o">++;</span>
                <span class="o">}</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>두 객체의 값을 비교하기 위해서는 equals() 메서드를 오버라이드 해야 한다. 만약 클래스 객체에 equals()가 오버라이드 되어있지 않을 경우, 그 부모클래스에서 equals() 메서드 찾고 그 다음으로 Object 클래스의 equals()를 사용한다. 자바의 모든 객체는 Object를 상속하기 때문에 다시 말하면 Object 클래스는 모든 객체의 부모클래스이기 때문에 어떠한 클래스 객체에서든 equals() 오버라이드 해서 사용할 수 있다.</p>

<p>그런데 equals() 메서드를 재정의할때 따라야 하는 규약이 있다.</p>

<ul>
  <li>반사성(reflexity)</li>
  <li>대칭성(symmetry)</li>
  <li>추이성(transitivity)</li>
  <li>일관성(consistency)</li>
  <li>null-아님(non-null)</li>
</ul>

<p><br /></p>

<p>이 규약을 지키지 않고 equals() 오버라이드하면 객체 비교 결과가 정확하지 않게 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">testClass</span> <span class="n">orc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">testClass</span><span class="o">(</span><span class="s">"john"</span><span class="o">,</span> <span class="s">"hello123"</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>
		<span class="n">testClass</span> <span class="n">orc2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">testClass</span><span class="o">(</span><span class="s">"jane"</span><span class="o">,</span> <span class="s">"bye123"</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
		<span class="n">testClass</span> <span class="n">orc3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">testClass</span><span class="o">(</span><span class="s">"jane"</span><span class="o">,</span> <span class="s">"bye123"</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
		<span class="n">testClass</span> <span class="n">orc4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">testClass</span><span class="o">(</span><span class="s">"jane"</span><span class="o">,</span> <span class="s">"bye123"</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
		
		<span class="c1">//equals() 메서드 규약 테스트</span>
		<span class="c1">//반사성</span>
		<span class="k">if</span><span class="o">(</span><span class="n">orc</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc</span><span class="o">))</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"객체 자신과 비교시 true"</span><span class="o">);</span>
		<span class="c1">//대칭성</span>
		<span class="k">if</span><span class="o">(</span><span class="n">orc</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc2</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">orc2</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc</span><span class="o">))</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"객체 위치를 바꿔도 결과는 동일하다."</span><span class="o">);</span>
		<span class="c1">//유추성</span>
		<span class="k">if</span><span class="o">(</span><span class="n">orc2</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc3</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">orc3</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc4</span><span class="o">))</span>
			<span class="k">if</span><span class="o">(</span><span class="n">orc2</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc4</span><span class="o">))</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"A와B가 같고 B와C가 같으면 A와C 또한 같다."</span><span class="o">);</span>
		
		<span class="c1">//객체 비교</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orc</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc2</span><span class="o">));</span> <span class="c1">//false</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orc</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="kc">null</span><span class="o">));</span> <span class="c1">//false</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orc2</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc3</span><span class="o">));</span> <span class="c1">//true</span>
		
		<span class="c1">//equal() 메서드 오버라이드 후 객체 데이터 비교</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orc</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc2</span><span class="o">.</span><span class="na">name</span><span class="o">));</span> <span class="c1">//false</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orc2</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">orc3</span><span class="o">.</span><span class="na">name</span><span class="o">));</span> <span class="c1">//true</span>
		
		<span class="c1">//'==' 연산자</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orc</span> <span class="o">==</span> <span class="n">orc2</span><span class="o">);</span> <span class="c1">//false</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orc</span><span class="o">.</span><span class="na">name</span> <span class="o">==</span> <span class="n">orc2</span><span class="o">.</span><span class="na">name</span><span class="o">);</span> <span class="c1">//false</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orc2</span> <span class="o">==</span> <span class="n">orc3</span><span class="o">);</span> <span class="c1">//false</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orc2</span><span class="o">.</span><span class="na">name</span> <span class="o">==</span> <span class="n">orc3</span><span class="o">.</span><span class="na">name</span><span class="o">);</span> <span class="c1">//true</span>
	<span class="o">}</span>
</code></pre></div></div>

<p><br /><br /></p>

<h1 id="hashcode">hashcode()</h1>

<p>hashCode()는 해쉬 알고리즘으로 만들어진 integer 값을 리턴 한다. 이 값을 해쉬코드라고 하며 클래스 인스턴스를 대신(represent)한다. equals() 메서드에 의해 동일하다고 확인된 두 객체는 동일한 해쉬 코드를 리턴해야 한다. 하지만 두 객체가 서로 다르다고 해서 무조건 해쉬 코드 또한 달라야 하는 것은 아니다.</p>

<p><strong>hashCode() 메서드 규약</strong></p>

<ul>
  <li>자바 어플리케이션을 실행하는 동안 동일한 객체를 한번 이상 호출할 때마다, hashCode()는 객체의 equals() 메서드에서 어떠한 정보도 수정되지 않았다는 조건 하에서 일관된 값을 리턴한다. 그리고 이 integer 값은 같은 어플리케이션의 또 다른 실행에서도 일치할 필요는 없다.</li>
  <li>두 객체가 equals() 메서드에 의해서 동일하다면 각 객체의 hashCode()는 동일한 integer 값을 리턴한다.</li>
  <li>두 객체가 동일하지 않다면 각 객체의 hashCode()는 서로 다른 integer 값을 리턴한다. 그러나 동등하지 않은 객체들의 별개의 integer 값은 해쉬 테이블 퍼포먼스를 향상 시킬 수도 있다는 점을 알고 있어야한다.</li>
</ul>

<p><br /></p>

<p>아래처럼 hashCode()를 오버라이드하면 모든 객체가 한 개의 bucket에 저장되고 탐색이 선형으로 진행되므로 헤쉬 테이블의 성능상 이점을 잃게 된다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>헤쉬 테이블 내에 각 bucket 마다 hashcode 부여하고 그 안에 객체를 저장하는데 만약 bucket 안에 hashcode가 같은 오브젝트가 여러 개 있을 경우, 탐색 과정에 더 많은 시간이 소모된다.</p>

<p>해쉬 코드가 유니크할수록, 다른 말로 같은 bucket에 저장되는 객체가 적을수록 이런 해쉬충돌(hash collisions)을 최소화하게 된다.</p>

<p>읽어볼 것: <a href="http://java-performance.info/hashcode-method-performance-tuning/">hashcode-method-performance-tuning</a></p>

<p><br /></p>

<h1 id="hash-collisions">Hash Collisions</h1>

<p>효율적인 해쉬 알고리즘을 사용해도 같은 해쉬코드를 갖는 객체가 생길 수 있고 심지어 그 객체가 동일하지 않을 수도 있다. 이런 상황을 해쉬 충돌(hash collision)이라고 한다.</p>

<p>해쉬 충돌을 해결하는 여러가지 방법 중 separate chaining 방식은 2개 이상에 객체가 같은 bucket을 가리킬 경우, 그 객체를 링크드리스트에 저장한다. 최악의 경우 여러 개의 bucket이 링크드리스트를 가질 수 있고 그 안에 오브젝트를 회수하는데 선형의 수행시간이 필요할 수 있다.</p>

<p>java8에서는 bucket의 링크드리스트 사이즈에 제한을 두고 그 보다 커질 경우 bucket이 트리맵을 사용하도록 한다. 그러므로써 링크드리스트 bucket의 객체를 회수하는데 필요한 O(n)의 시간복잡도를 O(logN)으로 줄이게 된다.</p>

<p>해쉬 테이블 이해와 구현 : https://bcho.tistory.com/1072</p>

<p>출처: https://www.baeldung.com/java-hashcode</p>

<p><br /></p>

<h2 id="-equals-인터뷰-예상-질문">+ equals() 인터뷰 예상 질문</h2>

<h3 id="1-equals와-함께-오버라이드-해야하는-메서드가-있는가">1. equals()와 함께 오버라이드 해야하는 메서드가 있는가?</h3>

<p>equals()와 hashcode()는 contract 관계에 있으므로 같이 오버라이드 해야 한다.</p>

<h3 id="2--equals-결과가-false인-두-객체가-같은-hashcode를-가질-수-있는가">2.  equals() 결과가 false인 두 객체가 같은 hashcode를 가질 수 있는가?</h3>

<p>그렇다. 반대로 equals() 결과가 true인 경우엔 반드시 동일한 hashcode를 같는다.</p>

<h3 id="3-같은-hashcode를-가지고-있는-2개의-key가-있을때-hashmap의-get-메서드는-어떻게-동작하는가">3. 같은 hashcode를 가지고 있는 2개의 key가 있을때 HashMap의 get() 메서드는 어떻게 동작하는가?</h3>

<p>hashcode가 같은 2개의 key는 같은 bucket에 저장된다. 그리고 그 값은 linked list에 의해 순서대로 저장된다. 알맞은 값을 찾기 위해서는 keys.equals() 메서드를 사용한다.</p>

<h3 id="4equals와-hashcode-메서드는-어디에-작성하는가">4.equals()와 hashcode() 메서드는 어디에 작성하는가?</h3>

<p>value object, domain object</p>

<h3 id="5클래스의-id-필드가-있다면-equals-메서드에-포함해야-하는가">5.클래스의 id 필드가 있다면 equals() 메서드에 포함해야 하는가?</h3>

<p>equals()메서드는 실제 컨텐츠를 비교해야 한다. id는 데이터베이스에 저장되는 객체에 부여되는 번호이고 데이터베이스에 저장되기전 일시적(transient) 객체에서는 가용하지 않다.</p>

<h3 id="7-equals로-객체와-null과-비교할때-어떤-문제가-발생하는가">7. equals()로 객체와 null과 비교할때 어떤 문제가 발생하는가?</h3>

<p>NullPointerException이 발생한다. 그러므로 null 체크시 == 연산자를 사용한다.</p>

<h3 id="8-equals-메서드-안에서-객체-타입-확인하기-위해서-사용하는-getclass-instanceof는-어떤-차이가-있는가">8. equals() 메서드 안에서 객체 타입 확인하기 위해서 사용하는 getClass(), instanceof는 어떤 차이가 있는가?</h3>

<p>instanceof는 같은 클래스이거나 상속 관계에 있는 부모클래스와 자식 클래스에 대해서 true를 리턴한다. 하지만 부모 클래스는 자식 클래스에 속하지 않으므로 서로 위치가 바뀐다면 false를 리턴한다. 이는 대칭성 규칙을 위반한다. 
반면에 getClass()는 정확하게 클래스를 비교하므로 상속 관계에 있는 부모, 자식 클래스 라도 false를 리턴한다.</p>

<h3 id="9-2개의-string을-비교-할때-nullpointerexception를-피하려면">9. 2개의 String을 비교 할때 NullPointerException를 피하려면?</h3>

<p>“abc”.equals(str)은 동작하지만 str.equals(“abc”)는 str이 null인 경우 NPE이 발생한다.</p>

<h3 id="10-equals와--연산자의-차이점은-무엇인가">10. equals()와 == 연산자의 차이점은 무엇인가?</h3>

<p>”==”는 두 객체가 가리키는 참조를 비교하고 equals() 메서드는 객체 또는 그 값을 비교할때 쓰인다.</p>

<p>출처: <a href="https://javarevisited.blogspot.com/2013/08/10-equals-and-hashcode-interview.html">10-equals-and-hashcode-interview</a></p>

<p><br /></p>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/equals" class="page__taxonomy-item" rel="tag">equals</a><span class="sep">, </span>
    
      
      
      <a href="/tags/hashcode" class="page__taxonomy-item" rel="tag">hashcode</a><span class="sep">, </span>
    
      
      
      <a href="/tags/java" class="page__taxonomy-item" rel="tag">java</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time datetime="2019-02-22T00:00:00+00:00">February 22, 2019</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/2019/02/07/ModuHome2.html" class="pagination--pager" title="ModuHome2
">이전</a>
    
    
      <a href="/2019/02/26/comparableVScomparator.html" class="pagination--pager" title="자바 객체 정렬하기
">다음</a>
    
  </nav>

    </div>

    
    <section id="disqus_thread">
    <script>
    
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://ykblog-2.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </section>
  </article>

  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <!-- <div class="page__footer-follow" style="padding-top: 10px;">
   <ul class="social-icons">
    
      <li><strong>팔로우:</strong></li>
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> 피드</a></li>
  </ul>
</div> -->

<div class="page__footer-copyright">&copy; 2019 yk-dev-blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  








  </body>
</html>
